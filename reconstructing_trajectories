from math import cos, sin, pi
import numpy as np
from matplotlib import pyplot as plt

def get_speeds(data_list):
    speed_list = []
    speed_list.append(0)
    
    for i in range(1, len(data_list)):
        dt = data_list[i][0] - data_list[i-1][0]
        delta_displacement = data_list[i][1] - data_list[i-1][1]
        speed = delta_displacement / dt
        speed_list.append(speed)
        
    return speed_list

def get_headings(data_list):
    yaw = 0
    yaw_list = []
    yaw_list.append(yaw)
    
    for i in range(1, len(data_list)):
        dt = data_list[i][0] - data_list[i-1][0]
        yaw += dt * data_list[i][2]
        yaw %= (2 * pi)
        yaw_list.append(yaw)
        
    return yaw_list

def get_x_y(data_list):
    x_y_list = []
    yaw_list = get_headings(data_list)
    x = 0
    y = 0
    x_y_list.append((x, y))
    
    for i in range(1, len(data_list)):
        delta_displacement = data_list[i][1] - data_list[i-1][1]
        delta_x = np.cos(yaw_list[i]) * delta_displacement
        delta_y = np.sin(yaw_list[i]) * delta_displacement
        x += delta_x
        y += delta_y
        x_y_list.append((x, y))
           
    return x_y_list


def show_x_y(data_list):
    x_y_list = get_x_y(data_list)
    
    X = [x[0] for x in x_y_list]
    Y = [y[1] for y in x_y_list]
    plt.scatter(X, Y)
    #plt.plot(X,Y)
    plt.title('Position vehicule')
    plt.xlabel('X')
    plt.ylabel('Y')
    plt.show()
    
    
    return
